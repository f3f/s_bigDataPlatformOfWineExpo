!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("commonLib",[],e):"object"==typeof exports?exports.commonLib=e():t.commonLib=e()}(this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var a=o[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n=window.webpackJsonpcommonLib;window.webpackJsonpcommonLib=function(r,i){for(var s,p,c=0,l=[];c<r.length;c++)p=r[c],a[p]&&l.push.apply(l,a[p]),a[p]=0;for(s in i)t[s]=i[s];for(n&&n(r,i);l.length;)l.shift().call(null,e);if(i[0])return o[0]=0,e(0)};var o={},a={0:0};return e.e=function(t,n){if(0===a[t])return n.call(null,e);if(void 0!==a[t])a[t].push(n);else{a[t]=[n];var o=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=e.p+""+t+".chunk.js",o.appendChild(r)}},e.m=t,e.c=o,e.p="",e(0)}([function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){d3.select(t.dom).select("svg").remove(),i(t).then(function(){r(t)})}function r(t){p(t)}function i(t){var e=t.option,n=e.dom.scrollWidth,o=e.dom.scrollHeight;return t.svg=d3.select(e.dom).append("svg").attr("width","100%").attr("height","100%").attr("viewbox","0 0 "+n+" "+o).attr("preserveAspectRatio","xMidYMid meet"),c(e.name,e.mapPath).then(function(e){var a=s(t,e,{width:n/1.2,height:o/1.2}),r=a.projection,i=a.leftTop,p=a.rightBottom,c=d3.geoPath(r);u=t.svg.append("defs");var d=u.append("pattern").attr("id","grid").attr("x",0).attr("y",0).attr("width",.005).attr("height",.005);d.append("line").attr("x1",0).attr("y1",0).attr("x2",100).attr("y2",0).attr("stroke-width",1).attr("stroke","#033da2"),d.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",100).attr("stroke-width",1).attr("stroke","#033da2");var f=u.append("clipPath").attr("id","mapClippingPath");f.selectAll("path").data(e.features).enter().append("path").attr("d",c),l(u);u.append("g").attr("id","map_shadow").selectAll("path").data(e.features).enter().append("path").attr("d",c).attr("fill","none").attr("stroke","#05395f");t.svg=t.svg.append("g").attr("transform","translate("+(n-(i[0]+p[0]))/2+", "+(o-(i[1]+p[1]))/2+")");for(var g=4;g--;)t.svg.append("use").attr("xlink:href","#map_shadow").attr("x",3*g).attr("y",3*g);t.svg.append("rect").attr("x",i[0]-100).attr("y",i[1]-400).attr("width","100%").attr("height","100%").attr("fill","url(#grid)").attr("clip-path","url(#mapClippingPath)"),t.svg.selectAll("path").data(e.features).enter().append("path").attr("class","all_map").attr("stroke","#2789e0").attr("stroke-width",1).attr("fill",function(t){var e=Math.floor(4*Math.random());return h[e]}).attr("opacity",1).attr("d",c).on("click",function(e){e._type="area",t.onclick(event,e)}),"china"==t.option.name&&t.svg.selectAll("text").data(e.features).enter().append("text").attr("style","pointer-events:none;").attr("transform",function(t,e){return"20"==t.properties.id?"translate("+(c.centroid(t)[0]-20)+","+(c.centroid(t)[1]+20)+")":"translate("+(c.centroid(t)[0]-10)+","+c.centroid(t)[1]+")"}).text(function(t){return t.properties.name}).attr("class","area_name").style("color","#000")})}function s(t,e,n){t.projection=d3.geoMercator().scale(100);var o,a,r,i,s=n.width,p=n.height;e.features.forEach(function(t){t.geometry.coordinates.forEach(function(t){t.forEach(function(t){t.length>2?t.forEach(function(t){o=void 0==o?t[0]:Math.min(o,t[0]),a=void 0==a?t[1]:Math.min(a,t[1]),r=void 0==r?t[0]:Math.max(r,t[0]),i=void 0==i?t[1]:Math.max(i,t[1])}):(o=void 0==o?t[0]:Math.min(o,t[0]),a=void 0==a?t[1]:Math.min(a,t[1]),r=void 0==r?t[0]:Math.max(r,t[0]),i=void 0==i?t[1]:Math.max(i,t[1]))})})});var c=t.projection([o,i]),l=t.projection([r,a]),u=Math.abs(c[0]-l[0]),d=Math.abs(c[1]-l[1]),f=Math.min(s/u,p/d);return t.projection=d3.geoMercator().scale(100*f),c=t.projection([o,a]),l=t.projection([r,i]),{projection:t.projection,leftTop:c,rightBottom:l}}function p(t){if(t.svg.selectAll(".location").remove(),t.data.points&&t.data.points.length){t.points={dom:[],data:t.data.points};var e=t.svg.selectAll(".location").data(t.data.points).enter().append("g").attr("class","location").attr("transform",function(e){var n=t.projection([e.log,e.lat]);return"translate("+n[0]+", "+n[1]+")"});e.append("image").attr("x",function(t){return-(t.icon.width/2)}).attr("y",function(t){return-(t.icon.height/2)}).attr("width",function(t){return t.icon.width}).attr("height",function(t){return t.icon.height}).attr("flag",function(t){return t.flag}).attr("xlink:href",function(t){return t.that=this,t.icon.url}).each(function(e){t.points.dom.push(this)}).on("click",function(e){e._type="point",t.onclick(event,e)})}}function c(t,e){e||(e=f[t]);var n=new Promise(function(t,n){d3.json(e,function(e,o){e?n(e):t(o)})});return n}function l(t){var e=t.append("linearGradient").attr("id","linear_g1").attr("x1",0).attr("y1",0).attr("x2","80%").attr("y2","120%");e.append("stop").attr("offset","0%").style("stop-color","rgb(0,104,255)").style("stop-opacity",1),e.append("stop").attr("offset","100%").style("stop-color","rgb(0,186,255)").style("stop-opacity",1);var n=t.append("linearGradient").attr("id","linear_g2").attr("x1",0).attr("y1",0).attr("x2","80%").attr("y2","120%");n.append("stop").attr("offset","0%").style("stop-color","rgb(31,183,255)").style("stop-opacity",1),n.append("stop").attr("offset","100%").style("stop-color","rgb(4,187,255)").style("stop-opacity",1);var o=t.append("linearGradient").attr("id","linear_g3").attr("x1",0).attr("y1",0).attr("x2","80%").attr("y2","120%");o.append("stop").attr("offset","0%").style("stop-color","rgb(81,208,252)").style("stop-opacity",1),o.append("stop").attr("offset","100%").style("stop-color","rgb(81,229,252)").style("stop-opacity",1);var a=t.append("linearGradient").attr("id","linear_g4").attr("x1",0).attr("y1",0).attr("x2","80%").attr("y2","120%");a.append("stop").attr("offset","0%").style("stop-color","rgb(56,186,253)").style("stop-opacity",1),a.append("stop").attr("offset","100%").style("stop-color","rgb(51,117,251)").style("stop-opacity",1)}Object.defineProperty(e,"__esModule",{value:!0});var u,d=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),f=n(1).config,h=["url(#linear_g1)","url(#linear_g2)","url(#linear_g3)","url(#linear_g4)"],g=e.CMap=function(){function t(e){o(this,t),this.option=e,this.svg=null,this.projection=null,a(this)}return d(t,[{key:"onclick",value:function(t,e){this.option.clickHandle&&this.option.clickHandle(t,e,this)}},{key:"onmouseover",value:function(t,e){this.option.mouseOverHandle&&this.option.mouseOverHandle(t,e,this),this.option.areamouseover&&this.option.areamouseover(t,e,this)}},{key:"onmouseout",value:function(t,e){this.option.mouseOutHandle&&this.option.mouseOutHandle(t,e),this.option.areamouseout&&this.option.areamouseout(t,e)}},{key:"dom",get:function(){return this.option.dom}},{key:"data",get:function(){return this.option.data},set:function(t){this.option.data=t,r(this)}},{key:"name",get:function(){return this.option.name}}]),t}();g.config=f},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=function(){function t(){n(this,t),this.baseDir=__dirname+"/geojson/"}return o(t,[{key:"china",get:function(){return this.baseDir+"china.geo.json"}},{key:"world",get:function(){return this.baseDir+"world.geo.json"}}]),t}();e.config=new a}])});